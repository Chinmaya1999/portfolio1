<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AIRMaster ¬∑ AI‚ÄëPowered AWS Practice</title>
  <style>
    /* ===== RESET & GLOBAL ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    body {
      background: radial-gradient(circle at 10% 20%, #0b1a2e, #0a0f1f);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      color: #eef5ff;
      line-height: 1.5;
    }

    /* ===== GLASS & CARD STYLES ===== */
    .glass-panel {
      background: rgba(18, 28, 46, 0.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(90, 150, 255, 0.15);
      border-radius: 2rem;
      box-shadow: 0 25px 40px -12px rgba(0, 20, 40, 0.7), inset 0 1px 1px rgba(255, 255, 255, 0.06);
    }

    /* ===== HEADER ===== */
    .app-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1.2rem 2.5rem;
      background: rgba(8, 18, 30, 0.8);
      backdrop-filter: blur(16px);
      border-bottom: 1px solid rgba(0, 180, 255, 0.25);
      box-shadow: 0 10px 25px -8px #00000055;
    }

    .logo-area {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo-icon {
      font-size: 2rem;
      filter: drop-shadow(0 0 8px #3b9eff);
    }

    .logo-text {
      font-weight: 700;
      font-size: 1.7rem;
      background: linear-gradient(130deg, #c0e0ff, #6cb2ff);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      letter-spacing: -0.5px;
    }

    .tagline {
      color: #a0bbdd;
      font-size: 0.95rem;
      font-weight: 400;
      background: rgba(64, 128, 255, 0.15);
      padding: 0.4rem 1rem;
      border-radius: 40px;
      border: 1px solid #2d4f7c;
    }

    /* ===== FOOTER ===== */
    .app-footer {
      text-align: center;
      padding: 1.5rem;
      font-size: 0.95rem;
      background: rgba(0, 8, 20, 0.7);
      border-top: 1px solid #1f3a5f;
      color: #90a9c4;
      margin-top: 2rem;
    }

    /* ===== MAIN LAYOUT ===== */
    .dashboard-wrapper {
      display: flex;
      flex: 1;
      padding: 1.8rem 2rem 0 2rem;
      gap: 2rem;
    }

    /* SIDEBAR */
    .topic-sidebar {
      width: 260px;
      padding: 1.6rem 1rem;
      background: rgba(12, 22, 35, 0.6);
      backdrop-filter: blur(8px);
      border-radius: 2rem;
      border: 1px solid #2b4a73;
      height: fit-content;
    }

    .sidebar-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      padding-left: 0.8rem;
      border-left: 4px solid #2f8cff;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: #c1d9ff;
    }

    .topic-list {
      display: flex;
      flex-direction: column;
      gap: 0.7rem;
    }

    .topic-btn {
      background: transparent;
      border: none;
      color: #bfd6f0;
      font-size: 1rem;
      padding: 0.9rem 1.2rem;
      text-align: left;
      border-radius: 1.5rem;
      cursor: pointer;
      transition: 0.2s ease;
      font-weight: 500;
      border: 1px solid transparent;
    }

    .topic-btn:hover {
      background: rgba(32, 96, 192, 0.25);
      border-color: #3d7bcf;
      color: white;
      transform: translateX(5px);
      box-shadow: 0 5px 12px #00000033;
    }

    .topic-btn.active {
      background: linear-gradient(145deg, #1a4979, #0e2e50);
      border-color: #59a0ff;
      color: white;
      font-weight: 600;
      box-shadow: 0 0 12px #2f8cff88;
    }

    /* MAIN CONTENT */
    .content-area {
      flex: 1;
      min-width: 0;
    }

    /* TOPIC CARDS (HOME) */
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
      gap: 1.5rem;
      margin-top: 1.2rem;
    }

    .topic-card {
      background: rgba(18, 35, 55, 0.7);
      backdrop-filter: blur(4px);
      border: 1px solid #335577;
      border-radius: 2rem;
      padding: 1.5rem 0.8rem;
      text-align: center;
      transition: 0.25s ease;
      cursor: pointer;
      box-shadow: 0 15px 25px -15px #000000;
    }

    .topic-card:hover {
      transform: scale(1.02) translateY(-5px);
      border-color: #5b9dff;
      background: rgba(28, 55, 90, 0.8);
      box-shadow: 0 25px 30px -12px #1f4faa;
    }

    .card-icon {
      font-size: 2.8rem;
      margin-bottom: 0.6rem;
      filter: drop-shadow(0 0 5px #3e93ff);
    }

    .card-title {
      font-weight: 600;
      font-size: 1.25rem;
      background: linear-gradient(145deg, #e0efff, #b3d5ff);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    /* QUIZ CONTAINER */
    .quiz-container {
      padding: 1.8rem;
      border-radius: 2.5rem;
    }

    .progress-bar {
      width: 100%;
      height: 12px;
      background: #1d3148;
      border-radius: 30px;
      margin: 20px 0 25px;
      overflow: hidden;
    }

    .progress-fill {
      width: 0%;
      height: 100%;
      background: linear-gradient(90deg, #409cff, #90e0ff);
      border-radius: 30px;
      transition: width 0.3s ease;
      box-shadow: 0 0 10px #409cff;
    }

    .quiz-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .score-badge {
      background: #122b44;
      padding: 0.5rem 1.3rem;
      border-radius: 40px;
      border: 1px solid #2f74d0;
      font-weight: 600;
      font-size: 1.2rem;
    }

    .question-text {
      font-size: 1.5rem;
      font-weight: 500;
      margin: 25px 0 30px;
      background: linear-gradient(135deg, #ffffff, #cddfff);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      line-height: 1.4;
    }

    .options-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin: 20px 0;
    }

    .option-btn {
      background: rgba(15, 30, 48, 0.8);
      border: 1.5px solid #314e72;
      border-radius: 2rem;
      padding: 1.1rem 1.5rem;
      color: #ecf5ff;
      font-size: 1.05rem;
      font-weight: 500;
      text-align: left;
      cursor: pointer;
      transition: 0.15s;
      backdrop-filter: blur(4px);
      word-break: break-word;
    }

    .option-btn:hover:not(:disabled) {
      background: #1e3f64;
      border-color: #5e9cff;
      transform: scale(1.01);
      box-shadow: 0 0 15px #1e63c0;
    }

    .option-btn.correct-highlight {
      background: #0f6320 !important;
      border-color: #8affb9 !important;
      box-shadow: 0 0 18px #1eb85d;
    }

    .option-btn.wrong-highlight {
      background: #961f2f !important;
      border-color: #ff9faf !important;
      opacity: 0.9;
    }

    .action-row {
      display: flex;
      gap: 1rem;
      margin: 30px 0 15px;
      flex-wrap: wrap;
      align-items: center;
    }

    .primary-btn {
      background: linear-gradient(145deg, #195aa5, #0d3470);
      border: none;
      color: white;
      font-weight: 600;
      padding: 0.9rem 2rem;
      border-radius: 3rem;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 8px 20px #0d2b55;
      border: 1px solid #5d99ff;
      transition: 0.15s;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .primary-btn:hover:not(:disabled) {
      background: #2266cc;
      transform: scale(1.02);
      box-shadow: 0 8px 25px #1e4fbb;
    }

    .primary-btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
      filter: grayscale(0.6);
    }

    .secondary-btn {
      background: transparent;
      border: 1.5px solid #3b6cb0;
      color: #c0dbff;
      padding: 0.9rem 2rem;
      border-radius: 3rem;
      font-weight: 500;
      cursor: pointer;
      transition: 0.2s;
    }

    .secondary-btn:hover {
      background: #162f52;
      border-color: #7eb0ff;
      color: white;
    }

    .loading-spinner {
      display: inline-block;
      width: 24px;
      height: 24px;
      border: 4px solid rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      border-top-color: #4da6ff;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .results-panel {
      text-align: center;
      padding: 2rem;
    }

    .result-stats {
      display: flex;
      justify-content: center;
      gap: 2.5rem;
      margin: 2.5rem 0;
      flex-wrap: wrap;
    }

    .stat-card {
      background: #11263e;
      padding: 1.3rem 2rem;
      border-radius: 1.8rem;
      border: 1px solid #2257a0;
      min-width: 140px;
    }

    .stat-number {
      font-size: 2.6rem;
      font-weight: 700;
      color: #6eb2ff;
    }

    .message-expert { font-size: 1.8rem; font-weight: 600; margin: 25px 0; background: linear-gradient(145deg, #d9ecff, #9cc2ff); -webkit-background-clip: text; background-clip: text; color: transparent; }

    /* responsiveness */
    @media (max-width: 750px) {
      .dashboard-wrapper { flex-direction: column; padding: 1rem; }
      .topic-sidebar { width: auto; }
      .options-grid { grid-template-columns: 1fr; }
      .app-header { flex-direction: column; align-items: start; gap: 0.6rem; }
    }
  </style>
</head>
<body>
  <header class="app-header">
    <div class="logo-area">
      <span class="logo-icon">‚òÅÔ∏è‚ö°</span>
      <span class="logo-text">AIRMaster</span>
    </div>
    <div class="tagline">Master AWS with AI‚ÄëPowered Smart Practice</div>
  </header>

  <div class="dashboard-wrapper">
    <!-- SIDEBAR with all topics -->
    <aside class="topic-sidebar">
      <div class="sidebar-title">üìå Services</div>
      <div class="topic-list" id="topicList">
        <!-- filled from JS -->
      </div>
    </aside>

    <!-- MAIN CONTENT (dynamic) -->
    <main class="content-area" id="mainContent">
      <!-- initially home (cards) will be injected via JS -->
    </main>
  </div>

  <footer class="app-footer">
    <p>¬© 2025 AIRMaster ¬∑ real AWS practice ¬∑ AI generated questions</p>
  </footer>

  <script>
    (function() {
      // ---------- CONSTANTS & DATA ----------
      const AWS_TOPICS = [
        "EC2", "S3", "Lambda", "IAM", "RDS", "VPC", "CloudFront", "DynamoDB"
      ];

      // ---------- REALISTIC QUESTION BANK (hand curated, no repeats) ----------
      // Each topic has exactly 20 distinct, real-world AWS questions with options and correct index.
      const QUESTION_BANK = {
        EC2: [
          { question: "Which EC2 purchasing option is most suitable for workloads that can be interrupted (e.g., batch processing)?", options: ["On-Demand", "Reserved Instances", "Spot Instances", "Dedicated Hosts"], correctIndex: 2 },
          { question: "What is the maximum network throughput currently possible for a single EC2 instance (as of 2025)?", options: ["10 Gbps", "25 Gbps", "50 Gbps", "100 Gbps"], correctIndex: 3 },
          { question: "Which EC2 feature allows you to add block-level storage directly to an instance?", options: ["Instance Store", "EBS volumes", "S3", "EFS"], correctIndex: 1 },
          { question: "You need a burstable general-purpose instance type for a low-cost web server. Which family should you choose?", options: ["T3", "C6g", "R5", "I3en"], correctIndex: 0 },
          { question: "Which EC2 metadata feature enables instances to securely access AWS API credentials?", options: ["User data", "Instance profile (IAM role)", "Key pairs", "Security groups"], correctIndex: 1 },
          { question: "What happens to the data on an instance store volume if the EC2 instance is stopped or terminated?", options: ["Data persists in S3", "Data is automatically backed up to EBS", "Data is lost", "Data remains on the volume"], correctIndex: 2 },
          { question: "Which EC2 pricing model offers the largest discount but requires a 1- or 3-year commitment?", options: ["Savings Plans", "Spot Instances", "On-Demand", "Dedicated Hosts"], correctIndex: 0 },
          { question: "What is the purpose of an EC2 placement group of type 'cluster'?", options: ["Spread instances across hardware", "Low-latency, high-throughput network between instances", "Separate instances for compliance", "Multi-AZ redundancy"], correctIndex: 1 },
          { question: "Which EC2 feature can automatically recover your instance if it becomes impaired due to underlying hardware issues?", options: ["Auto Scaling", "CloudWatch alarm + recovery", "EC2 health checks", "Termination protection"], correctIndex: 1 },
          { question: "What is the maximum interval for EC2 detailed monitoring (CloudWatch metrics)?", options: ["1 minute", "5 minutes", "15 minutes", "30 minutes"], correctIndex: 0 },
          { question: "Which type of load balancer is recommended for EC2 instances to handle HTTP/HTTPS traffic with advanced routing?", options: ["NLB", "ALB", "CLB", "GWLB"], correctIndex: 1 },
          { question: "How can you ensure an EC2 instance in a private subnet can access the internet without exposing it to inbound traffic?", options: ["Internet Gateway", "NAT Gateway", "VPC Peering", "Direct Connect"], correctIndex: 1 },
          { question: "Which EC2 feature allows you to run instances on physical servers dedicated for your use?", options: ["Dedicated Instances", "Dedicated Hosts", "Reserved Instances", "Capacity Reservations"], correctIndex: 1 },
          { question: "What is the maximum size of a single EBS volume as of 2025?", options: ["16 TB", "32 TB", "64 TB", "128 TB"], correctIndex: 2 },
          { question: "Which EBS volume type is designed for transactional, high-performance databases (IOPS intensive)?", options: ["gp3", "io2 Block Express", "st1", "sc1"], correctIndex: 1 },
          { question: "True or False: You can resize an EBS volume without stopping the EC2 instance.", options: ["True", "False", "Only for root volumes", "Only for data volumes"], correctIndex: 0 },
          { question: "Which attribute must match for two EC2 instances to communicate via Elastic Fabric Adapter (EFA)?", options: ["Same VPC", "Same placement group", "Same subnet", "Same security group"], correctIndex: 1 },
          { question: "What is the primary benefit of using an EC2 launch template over a launch configuration?", options: ["Versioning", "Lower cost", "More instance types", "All of the above"], correctIndex: 0 },
          { question: "Which AWS service can automatically distribute incoming application traffic across multiple EC2 instances?", options: ["Route 53", "ELB", "CloudFront", "Global Accelerator"], correctIndex: 1 },
          { question: "When you stop an EC2 instance, what happens to the public IPv4 address?", options: ["It is released", "It remains the same", "It is converted to Elastic IP", "It is deleted permanently"], correctIndex: 0 }
        ],
        S3: [
          { question: "What is the maximum object size that can be uploaded to Amazon S3 in a single PUT?", options: ["1 GB", "5 GB", "10 GB", "5 TB"], correctIndex: 1 },
          { question: "Which S3 storage class is most cost-effective for data accessed less than once a year with a 30-minute retrieval time?", options: ["S3 Standard", "S3 Glacier Deep Archive", "S3 One Zone-IA", "S3 Intelligent-Tiering"], correctIndex: 1 },
          { question: "How can you automatically transition objects between storage classes to save costs?", options: ["S3 Lifecycle policies", "S3 Transfer Acceleration", "S3 Replication", "S3 Batch Operations"], correctIndex: 0 },
          { question: "What does S3 Transfer Acceleration leverage to speed up uploads?", options: ["Edge locations", "Direct Connect", "Multiple parallel streams", "Larger packet size"], correctIndex: 0 },
          { question: "Which feature prevents permanent deletion of objects by requiring a version to be explicitly deleted?", options: ["MFA Delete", "Object lock", "Versioning", "Retention policies"], correctIndex: 0 },
          { question: "What is the durability of objects stored in S3 Standard?", options: ["99.99%", "99.999999999% (11 9's)", "99.9999%", "99.9%"], correctIndex: 1 },
          { question: "You need to host a static website on S3. What must you enable?", options: ["Static website hosting + public read policy", "Versioning", "CloudFront", "Transfer Acceleration"], correctIndex: 0 },
          { question: "Which S3 feature can automatically detect and fix corrupt data using checksums?", options: ["Versioning", "CRR", "Data integrity (MD5)", "Object lock"], correctIndex: 2 },
          { question: "What is the minimum storage duration for S3 Glacier Flexible Retrieval?", options: ["30 days", "60 days", "90 days", "180 days"], correctIndex: 2 },
          { question: "Which authentication method is recommended for granting temporary access to an S3 object?", options: ["Pre-signed URLs", "Public read ACL", "Bucket policy with principal '*'", "IAM user keys in URL"], correctIndex: 0 },
          { question: "What is S3 Object Lock primarily used for?", options: ["Encryption", "Preventing object deletion or overwrites for compliance", "Version control", "Replication"], correctIndex: 1 },
          { question: "Which S3 replication type replicates objects across different AWS regions?", options: ["SRR", "CRR", "MRR", "RRR"], correctIndex: 1 },
          { question: "What happens to incomplete multipart uploads if not explicitly cleaned up?", options: ["They are automatically removed after 7 days", "They incur storage costs", "They fail", "They complete after 30 days"], correctIndex: 1 },
          { question: "S3 Select allows you to:", options: ["Retrieve subsets of object data using SQL", "Select random objects", "Choose optimal storage class", "Filter by tags"], correctIndex: 0 },
          { question: "Which header can be used to enforce encryption in transit for S3?", options: ["x-amz-server-side-encryption", "x-amz-content-sha256", "x-amz-acl", "x-amz-meta-"], correctIndex: 1 },
          { question: "What is the maximum number of buckets per AWS account by default?", options: ["10", "100", "1000", "Unlimited"], correctIndex: 1 },
          { question: "Which S3 storage class provides milliseconds retrieval but with lower availability than Standard?", options: ["S3 Standard-IA", "S3 One Zone-IA", "S3 Glacier", "S3 Glacier Deep Archive"], correctIndex: 1 },
          { question: "How can you restrict access to specific IP addresses for an S3 bucket?", options: ["IAM policy", "Bucket policy with condition", "ACL", "Pre-signed URL"], correctIndex: 1 },
          { question: "What does S3 Inventory provide?", options: ["List of objects and metadata", "Inventory of S3 buckets", "Cost report", "Daily usage alerts"], correctIndex: 0 },
          { question: "Which AWS service can be used to analyze S3 access patterns and recommend storage class changes?", options: ["AWS Trusted Advisor", "S3 Analytics", "CloudWatch", "Cost Explorer"], correctIndex: 1 }
        ],
        Lambda: [
          { question: "What is the maximum execution timeout for an AWS Lambda function?", options: ["5 minutes", "10 minutes", "15 minutes", "30 minutes"], correctIndex: 2 },
          { question: "Which storage option is temporarily available to a Lambda function in the /tmp directory?", options: ["512 MB", "10240 MB (10 GB)", "2048 MB", "Unlimited"], correctIndex: 1 },
          { question: "What is the maximum size of a Lambda deployment package (zipped, direct upload)?", options: ["50 MB", "100 MB", "250 MB", "500 MB"], correctIndex: 0 },
          { question: "Which triggers can invoke a Lambda function asynchronously? (Choose the best answer)", options: ["S3, SNS", "API Gateway, ALB", "CloudFront, Step Functions", "All of the above"], correctIndex: 0 },
          { question: "How does Lambda isolate functions in the same account?", options: ["VPC", "IAM roles", "Execution environment sandbox", "Separate containers"], correctIndex: 2 },
          { question: "What is Lambda@Edge primarily used for?", options: ["Run functions at CloudFront edge locations", "Lambda in VPC", "Multi-region replication", "High-performance computing"], correctIndex: 0 },
          { question: "Which statement about Lambda concurrency is accurate?", options: ["Default concurrency limit is 1000 per region", "Concurrency is unlimited", "Reserved concurrency guarantees availability", "Both A and C"], correctIndex: 3 },
          { question: "What happens to a Lambda function that exhausts its concurrency limit?", options: ["Requests are throttled (429 error)", "They queue automatically", "They fail silently", "They retry indefinitely"], correctIndex: 0 },
          { question: "Which environment variable can be used to add dependencies to the Python path in Lambda?", options: ["PATH", "PYTHONPATH", "LAMBDA_RUNTIME", "LD_LIBRARY_PATH"], correctIndex: 1 },
          { question: "Lambda supports which of the following languages natively?", options: ["Node.js, Python, Java, Go", "C#, Ruby, Rust", "PowerShell", "All of the above"], correctIndex: 3 },
          { question: "What is the purpose of AWS Lambda Layers?", options: ["Manage common code across functions", "Add security layer", "Networking layer", "Encryption layer"], correctIndex: 0 },
          { question: "You need to connect a Lambda function to a private RDS database. What must you configure?", options: ["VPC access + same subnet", "Internet Gateway", "NAT Gateway", "Direct Connect"], correctIndex: 0 },
          { question: "How is Lambda billed?", options: ["Number of invocations and duration", "vCPU hours", "Memory allocated only", "Concurrency units"], correctIndex: 0 },
          { question: "What is the maximum memory you can allocate to a Lambda function?", options: ["1.5 GB", "3 GB", "6 GB", "10 GB"], correctIndex: 3 },
          { question: "Which feature enables you to run Lambda functions in your own data center?", options: ["Outposts", "Local Zone", "Wavelength", "IoT Greengrass"], correctIndex: 0 },
          { question: "Lambda functions by default run in a VPC owned by AWS. To access resources in your VPC you must:", options: ["Attach an ENI in your VPC", "Use a NAT Gateway", "Use VPC Endpoints", "Assign Elastic IP"], correctIndex: 0 },
          { question: "What is the maximum size of an event payload that triggers a Lambda (synchronous invocation)?", options: ["256 KB", "6 MB", "10 MB", "128 KB"], correctIndex: 1 },
          { question: "How can you make a Lambda function idempotent to prevent duplicate processing?", options: ["Check for existing records using unique ID", "Increase timeout", "Use dead-letter queue", "Enable X-Ray"], correctIndex: 0 },
          { question: "Which AWS service can be used to orchestrate multiple Lambda functions?", options: ["Step Functions", "SQS", "EventBridge", "AppSync"], correctIndex: 0 },
          { question: "What is the default Lambda function handler signature for Node.js?", options: ["exports.handler = (event, context, callback)", "function(event, context)", "handle(event)", "main(event)"], correctIndex: 0 }
        ],
        IAM: [
          { question: "Which IAM entity is used to grant temporary security credentials to AWS resources?", options: ["IAM user", "IAM role", "IAM group", "IAM policy"], correctIndex: 1 },
          { question: "What is the maximum trust relationship policy size for an IAM role?", options: ["2048 characters", "4096 characters", "10240 characters", "Unlimited"], correctIndex: 0 },
          { question: "Which AWS service enables federation with Active Directory?", options: ["IAM Identity Center (SSO)", "Cognito", "Directory Service", "All of the above"], correctIndex: 3 },
          { question: "An IAM policy with \"Effect\": \"Deny\" overrides an \"Allow\" for the same action.", options: ["True", "False", "Only if explicitly set", "Depends on resource"], correctIndex: 0 },
          { question: "What is a service control policy (SCP) used for?", options: ["Control permissions in member accounts (AWS Organizations)", "Restrict IAM users", "Set password policies", "Enable MFA"], correctIndex: 0 },
          { question: "Which IAM feature is used to analyze what actions a user can perform on specific resources?", options: ["IAM Access Analyzer", "Policy Simulator", "Credential Report", "Trusted Advisor"], correctIndex: 1 },
          { question: "What is the recommended way to provide access to an EC2 instance for another AWS service (e.g., S3)?", options: ["Store access keys on instance", "Use an IAM role attached to instance profile", "Create IAM user for the instance", "Use root account"], correctIndex: 1 },
          { question: "Which condition key can be used to enforce MFA before allowing API access?", options: ["aws:MultiFactorAuthPresent", "aws:SourceIp", "aws:RequestedRegion", "iam:PassedToService"], correctIndex: 0 },
          { question: "IAM policies are ________ by default.", options: ["Deny", "Allow", "Inherited", "Audited"], correctIndex: 0 },
          { question: "How many IAM roles can be attached to a single IAM user?", options: ["1", "2", "5", "10"], correctIndex: 1 },
          { question: "What is the purpose of an IAM permissions boundary?", options: ["Set maximum permissions a role/user can have", "Limit service access", "Define network boundaries", "Audit access"], correctIndex: 0 },
          { question: "Which file format is commonly used to write IAM policies?", options: ["JSON", "XML", "YAML", "TOML"], correctIndex: 0 },
          { question: "What is the AWS root account best practice regarding access keys?", options: ["Use for automation", "Do not create access keys; use IAM users", "Share only with admins", "Rotate every 7 days"], correctIndex: 1 },
          { question: "Which type of IAM identity can have a password and access keys simultaneously?", options: ["IAM user", "IAM role", "Root user", "Federated user"], correctIndex: 0 },
          { question: "What does IAM Access Analyzer do?", options: ["Identifies resources shared with external entities", "Monitors failed logins", "Analyzes password strength", "Reviews policy syntax"], correctIndex: 0 },
          { question: "What is the maximum session duration for an assumed IAM role (using AssumeRole)?", options: ["1 hour", "6 hours", "12 hours", "24 hours"], correctIndex: 2 },
          { question: "Which global condition key lets you restrict access to specific IP address ranges?", options: ["aws:SourceIp", "aws:IpAddress", "aws:Referer", "aws:UserAgent"], correctIndex: 0 },
          { question: "Can you attach a managed policy to an IAM group?", options: ["Yes", "No", "Only AWS managed policies", "Only customer managed policies"], correctIndex: 0 },
          { question: "What is the principal of least privilege?", options: ["Grant only necessary permissions", "Use one policy per user", "Deny all by default", "Audit weekly"], correctIndex: 0 },
          { question: "Which AWS service provides a central place to manage access keys and rotate them automatically?", options: ["Secrets Manager", "IAM", "Parameter Store", "Certificate Manager"], correctIndex: 0 }
        ],
        RDS: [
          { question: "Which Amazon RDS database engine supports the 'Aurora' cloud-native architecture?", options: ["MySQL and PostgreSQL", "Oracle", "SQL Server", "MariaDB"], correctIndex: 0 },
          { question: "What is the maximum size for an Amazon RDS for MySQL (non-Aurora) database with provisioned IOPS?", options: ["16 TB", "32 TB", "64 TB", "6 TB"], correctIndex: 3 },
          { question: "Which feature automatically creates and maintains a standby replica in a different AZ for high availability?", options: ["Read Replica", "Multi-AZ deployment", "Auto Scaling", "Backup retention"], correctIndex: 1 },
          { question: "How can you scale read-heavy database workloads in RDS?", options: ["Create one or more Read Replicas", "Use Multi-AZ", "Increase instance size", "Enable storage autoscaling"], correctIndex: 0 },
          { question: "What is the default backup retention period for an RDS instance?", options: ["1 day", "7 days", "30 days", "35 days"], correctIndex: 0 },
          { question: "Which RDS storage type is suitable for high-performance OLTP workloads?", options: ["gp2", "io1/io2", "magnetic", "st1"], correctIndex: 1 },
          { question: "Can you encrypt an existing unencrypted RDS instance?", options: ["Yes, with no downtime", "Yes, via snapshot copy and restore", "No, you need to create new instance", "Only for Oracle"], correctIndex: 1 },
          { question: "What does RDS Automated Backup include?", options: ["Daily full backup + transaction logs", "Only daily snapshot", "Only logs", "Weekly full backup"], correctIndex: 0 },
          { question: "How can you achieve cross-region disaster recovery for RDS?", options: ["Cross-region Read Replica", "Multi-AZ in different region", "Manual snapshot copy", "RDS replication"], correctIndex: 0 },
          { question: "Which RDS engine supports in-memory acceleration via Memcached/Redis integration?", options: ["Aurora", "RDS for MySQL", "RDS for PostgreSQL", "All of the above with ElastiCache"], correctIndex: 3 },
          { question: "What is the purpose of an RDS parameter group?", options: ["Configure engine settings", "Manage security", "Set backup retention", "Define storage type"], correctIndex: 0 },
          { question: "When you delete an RDS instance, what happens to automated backups?", options: ["Deleted with instance", "Retained for 30 days", "You can choose to retain final snapshot", "Moved to S3"], correctIndex: 2 },
          { question: "Which RDS feature can help you recover from a logical corruption error (e.g., dropped table)?", options: ["Point-in-Time Restore", "Multi-AZ", "Read Replica promotion", "Failover"], correctIndex: 0 },
          { question: "How does RDS enhanced monitoring differ from standard monitoring?", options: ["OS-level metrics", "Database logs", "SQL queries", "Network traffic"], correctIndex: 0 },
          { question: "What is the maximum number of RDS Read Replicas for MySQL (non-Aurora)?", options: ["5", "10", "15", "20"], correctIndex: 2 },
          { question: "Which statement is true about RDS maintenance windows?", options: ["You can choose a 30-minute window", "It's required for all updates", "It applies to minor version upgrades", "All of the above"], correctIndex: 3 },
          { question: "What is the typical failover time for a Multi-AZ RDS instance?", options: ["< 1 minute", "1-2 minutes", "5-10 minutes", "15+ minutes"], correctIndex: 1 },
          { question: "Can you connect to a standby instance in a Multi-AZ deployment for read traffic?", options: ["Yes, always", "No, it's only for failover", "Only if you enable read endpoint", "Only for Aurora"], correctIndex: 3 },
          { question: "Which AWS service can be used to migrate on-premises databases to RDS with minimal downtime?", options: ["DMS", "SCT", "Data Pipeline", "Glue"], correctIndex: 0 },
          { question: "RDS Proxy helps with:", options: ["Connection pooling and reducing Lambda cold starts", "SQL injection prevention", "Query caching", "Database auditing"], correctIndex: 0 }
        ],
        VPC: [
          { question: "What is the maximum number of peering connections per VPC?", options: ["50", "125", "256", "Unlimited"], correctIndex: 1 },
          { question: "Which component enables a VPC to connect to the internet?", options: ["Internet Gateway", "NAT Gateway", "VPG", "Direct Connect"], correctIndex: 0 },
          { question: "How many IP addresses in a /24 subnet are reserved by AWS?", options: ["2", "3", "4", "5"], correctIndex: 3 },
          { question: "What does a Network ACL provide for a VPC subnet?", options: ["Stateful traffic filtering", "Stateless traffic filtering", "DNS resolution", "Routing between subnets"], correctIndex: 1 },
          { question: "Which VPC component allows on-premises connectivity over VPN?", options: ["Virtual Private Gateway", "Internet Gateway", "NAT Gateway", "Transit Gateway"], correctIndex: 0 },
          { question: "What is the purpose of a VPC endpoint (Gateway type)?", options: ["Connect to S3/DynamoDB privately", "Connect to EC2 instances", "VPN connection", "Internet access"], correctIndex: 0 },
          { question: "What is the smallest possible subnet mask in a VPC?", options: ["/28", "/27", "/26", "/24"], correctIndex: 0 },
          { question: "How many elastic IPs can you have per region by default?", options: ["5", "10", "20", "50"], correctIndex: 0 },
          { question: "Which AWS service allows you to share subnets with other accounts?", options: ["Resource Access Manager", "VPC Peering", "Transit Gateway", "PrivateLink"], correctIndex: 0 },
          { question: "What does VPC Flow Logs capture?", options: ["IP traffic information", "DNS queries", "VPN tunnel status", "Console login events"], correctIndex: 0 },
          { question: "Can you change the CIDR block of a VPC after creation?", options: ["Yes", "No", "Only by adding additional CIDR", "Only for /16"], correctIndex: 2 },
          { question: "Which type of load balancer is not internet-facing (internal only)?", options: ["Internal ALB", "Public NLB", "Classic LB", "Gateway LB"], correctIndex: 0 },
          { question: "What is the purpose of an egress-only Internet Gateway?", options: ["Outbound-only IPv6 access", "Inbound-only IPv4", "Both IPv4/IPv6 outbound", "Private IPv6"], correctIndex: 0 },
          { question: "How many NAT gateways are recommended for high availability in a region?", options: ["One per AZ", "One per VPC", "One per subnet", "Only one for all AZs"], correctIndex: 0 },
          { question: "A security group has _________ rules.", options: ["Allow only", "Deny only", "Allow and Deny", "Stateless"], correctIndex: 0 },
          { question: "Which AWS service uses VPC Endpoints (Interface type) powered by PrivateLink?", options: ["S3", "DynamoDB", "Kinesis", "All of the above"], correctIndex: 3 },
          { question: "What is the maximum transmission unit (MTU) of a VPC network by default?", options: ["1500", "9001", "4096", "8192"], correctIndex: 1 },
          { question: "Which of the following is required for instances in a private subnet to download updates from the internet?", options: ["NAT Gateway/Instance", "Internet Gateway", "VPC Peering", "Proxy"], correctIndex: 0 },
          { question: "Can you peer VPCs across different AWS accounts?", options: ["Yes", "No", "Only if same region", "Only if same organization"], correctIndex: 0 },
          { question: "What is a VPC prefix list used for?", options: ["Reference set of CIDRs in security groups/routes", "List of subnet IDs", "Network ACL rules", "Route table entries"], correctIndex: 0 }
        ],
        CloudFront: [
          { question: "What is the primary purpose of AWS CloudFront?", options: ["CDN", "DNS resolution", "Load balancing", "DDoS protection"], correctIndex: 0 },
          { question: "Which feature can reduce latency by caching content at edge locations?", options: ["Cache behaviors", "Origin failover", "Field-level encryption", "Lambda@Edge"], correctIndex: 0 },
          { question: "What is an origin in CloudFront?", options: ["The source of the content (S3/HTTP server)", "Edge location", "DNS name", "Cache policy"], correctIndex: 0 },
          { question: "Which price class includes all edge locations globally?", options: ["Price Class All", "Price Class 100", "Price Class 200", "Price Class UK Only"], correctIndex: 0 },
          { question: "How can you restrict access to content delivered via CloudFront only?", options: ["Origin Access Control (OAC)", "Signed URLs/Cookies", "Geo-restriction", "All of the above"], correctIndex: 3 },
          { question: "What is the default TTL for objects in CloudFront if no Cache-Control headers are present?", options: ["24 hours", "24 seconds", "1 hour", "Depends on origin"], correctIndex: 0 },
          { question: "What does CloudFront edge location do when it receives a request for an expired object?", options: ["Forwards to origin", "Returns 404", "Returns stale if origin unavailable", "Both A and C"], correctIndex: 3 },
          { question: "Which AWS WAF feature can be integrated with CloudFront to block malicious requests?", options: ["Web ACL", "Shield Advanced", "Firewall Manager", "GuardDuty"], correctIndex: 0 },
          { question: "What is Lambda@Edge primarily used for?", options: ["Run code at edge locations to customize content", "Edge caching", "Image optimization", "Load balancing"], correctIndex: 0 },
          { question: "Can CloudFront serve content over HTTPS?", options: ["Yes, with SSL/TLS certificates", "No", "Only with custom domain", "Only for S3 origins"], correctIndex: 0 },
          { question: "What is the purpose of CloudFront geo-restriction?", options: ["Allow/block countries", "Restrict by IP", "Cache based on location", "Price control"], correctIndex: 0 },
          { question: "Which distribution type is used for RTMP streaming (deprecated now, but historically)?", options: ["Web distribution", "RTMP distribution", "Video distribution", "Media distribution"], correctIndex: 1 },
          { question: "How many edge locations does CloudFront have approximately (as of 2025)?", options: ["50+", "100+", "200+", "400+"], correctIndex: 3 },
          { question: "What does CloudFront field-level encryption protect?", options: ["Sensitive data like credit cards", "All POST data", "Headers only", "Cookies"], correctIndex: 0 },
          { question: "Which HTTP method is not supported by default for CloudFront?", options: ["OPTIONS", "PUT", "PATCH", "DELETE"], correctIndex: 0 },
          { question: "What is the maximum size of a single file that can be served via CloudFront?", options: ["20 GB", "50 GB", "100 GB", "1 TB"], correctIndex: 1 },
          { question: "What is CloudFront origin failover?", options: ["Redirect to secondary origin if primary fails", "Failover between edge locations", "Cache fallback", "DNS failover"], correctIndex: 0 },
          { question: "Which header forces CloudFront to fetch a fresh version from the origin?", options: ["Cache-Control: no-cache", "Pragma: no-cache", "If-Modified-Since", "All can trigger revalidation"], correctIndex: 3 },
          { question: "What is CloudFront signed URL vs signed cookie difference?", options: ["URL for individual files, cookie for multiple", "Cookie is more secure", "URL works for RTMP", "No difference"], correctIndex: 0 },
          { question: "Which service can be used to protect CloudFront from large DDoS attacks?", options: ["AWS Shield Advanced", "WAF", "Route 53", "All of the above"], correctIndex: 3 }
        ],
        DynamoDB: [
          { question: "What is the maximum size of a single item in DynamoDB?", options: ["64 KB", "256 KB", "400 KB", "1 MB"], correctIndex: 2 },
          { question: "Which consistency model is the default for read operations in DynamoDB?", options: ["Eventual consistent", "Strong consistent", "Transactional", "Serializable"], correctIndex: 0 },
          { question: "What is a partition key in DynamoDB?", options: ["Primary key for distribution", "Sort key", "Index key", "Foreign key"], correctIndex: 0 },
          { question: "Which read capacity mode automatically scales based on workload?", options: ["Provisioned", "On-Demand", "Auto Scaling", "Spot"], correctIndex: 1 },
          { question: "What is the purpose of a global secondary index (GSI)?", options: ["Query on non-key attributes", "Global replication", "Strong consistency reads", "Backup"], correctIndex: 0 },
          { question: "DynamoDB Accelerator (DAX) is a cache for:", options: ["In-memory read/write acceleration", "Only write caching", "Only query caching", "SQL queries"], correctIndex: 0 },
          { question: "How many tables can you create in a region by default?", options: ["256", "512", "1024", "Unlimited"], correctIndex: 0 },
          { question: "What is a DynamoDB stream used for?", options: ["Capture item-level changes", "Streaming analytics", "Real-time SQL", "Backup"], correctIndex: 0 },
          { question: "Which feature enables cross-region replication for DynamoDB?", options: ["Global Tables", "Streams + Lambda", "Backup", "DMS"], correctIndex: 0 },
          { question: "What is the maximum length of a partition key attribute value?", options: ["512 bytes", "1024 bytes", "2048 bytes", "4096 bytes"], correctIndex: 2 },
          { question: "Which consistency read may have higher latency but always returns the latest data?", options: ["Strongly consistent", "Eventually consistent", "Transactional", "Batch"], correctIndex: 0 },
          { question: "What is a TTL (Time to Live) attribute used for?", options: ["Automatically delete expired items", "Set cache expiry", "Version control", "Timestamp indexing"], correctIndex: 0 },
          { question: "What is the maximum provisioned throughput per table for reads (before requesting increase)?", options: ["40000 read capacity units", "8000 read capacity units", "Unlimited", "20000 read capacity units"], correctIndex: 0 },
          { question: "Which DynamoDB API operation can retrieve multiple items from multiple tables in one call?", options: ["BatchGetItem", "Query", "Scan", "GetItem"], correctIndex: 0 },
          { question: "What is the default page size for a Scan operation?", options: ["1 MB", "10 MB", "100 items", "1 GB"], correctIndex: 0 },
          { question: "Can you perform transactions across multiple DynamoDB tables?", options: ["Yes, with TransactWriteItems", "No", "Only within same table", "Only with PartiQL"], correctIndex: 0 },
          { question: "Which pricing model charges per million read/write requests without capacity planning?", options: ["On-Demand", "Provisioned", "Reserved capacity", "Spot"], correctIndex: 0 },
          { question: "How can you export DynamoDB table data to S3 without writing custom code?", options: ["DynamoDB Export to S3 (feature)", "Data Pipeline", "Glue", "Athena"], correctIndex: 0 },
          { question: "What is a sort key (range key) used for?", options: ["Ordering data within a partition", "Secondary index", "Primary key", "Partitioning"], correctIndex: 0 },
          { question: "Which AWS service can be used to run complex SQL-like queries on DynamoDB data?", options: ["Athena (with Export to S3)", "Redshift", "EMR", "All via export"], correctIndex: 3 }
        ]
      };

      // ---------- STATE ----------
      let currentScreen = 'home'; // 'home', 'quiz', 'results'
      let selectedTopic = 'EC2';
      let quizQuestions = [];           // array of 20 from the bank for selected topic
      let currentQIndex = 0;
      let score = 0;                    
      let userAnswers = [];             // store chosen index (null if not answered)
      let lockSelection = false;        // after answer, block further clicks

      // dom elements
      const mainEl = document.getElementById('mainContent');
      const topicListEl = document.getElementById('topicList');

      // helper: render sidebar topics
      function renderSidebar() {
        topicListEl.innerHTML = AWS_TOPICS.map(topic => 
          `<button class="topic-btn ${selectedTopic === topic ? 'active' : ''}" data-topic="${topic}">‚òÅÔ∏è ${topic}</button>`
        ).join('');
        document.querySelectorAll('.topic-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const newTopic = e.currentTarget.dataset.topic;
            selectedTopic = newTopic;
            renderSidebar(); // re-activate style
            resetToHome();
          });
        });
      }

      // Helper reset to home
      function resetToHome() {
        currentScreen = 'home';
        renderHomeScreen();
      }

      // HOME screen (cards)
      function renderHomeScreen() {
        currentScreen = 'home';
        let cardsHtml = `<h2 style="margin-bottom: 0.5rem; font-size: 2rem; font-weight: 600; background: linear-gradient(135deg,#b0d0ff, white); -webkit-background-clip: text; background-clip: text; color: transparent;">‚òÅÔ∏è Practice by service</h2>`;
        cardsHtml += `<div class="cards-grid">`;
        AWS_TOPICS.forEach(topic => {
          cardsHtml += `<div class="topic-card" data-topic-home="${topic}">
            <div class="card-icon">üìö</div>
            <div class="card-title">${topic}</div>
            <div style="font-size:0.8rem; margin-top:8px; color:#87b9ff;">20 real questions</div>
          </div>`;
        });
        cardsHtml += `</div>`;
        mainEl.innerHTML = cardsHtml;
        document.querySelectorAll('.topic-card').forEach(card => {
          card.addEventListener('click', (e) => {
            const topic = card.dataset.topicHome;
            selectedTopic = topic;
            renderSidebar();
            startQuizForTopic(topic);
          });
        });
      }

      // ---------- START QUIZ (load from pre-defined bank) ----------
      function startQuizForTopic(topic) {
        // show loading inside main
        currentScreen = 'quiz';
        mainEl.innerHTML = `<div class="quiz-container glass-panel" style="text-align:center;padding:4rem;"><div class="loading-spinner" style="margin:20px auto;"></div><p style="color:#b3d9ff;">Loading 20 AWS questions about ${topic} ...</p></div>`;
        // Simulate network delay, then load questions (real bank)
        setTimeout(() => {
          // Fetch from bank (deep copy to avoid modifications)
          quizQuestions = QUESTION_BANK[topic] ? JSON.parse(JSON.stringify(QUESTION_BANK[topic])) : [];
          // Ensure exactly 20, but bank already has 20 per topic.
          currentQIndex = 0;
          score = 0;
          userAnswers = new Array(20).fill(null);
          lockSelection = false;
          renderQuizScreen();
        }, 400);
      }

      function renderQuizScreen() {
        if (!quizQuestions.length) return;
        const q = quizQuestions[currentQIndex];
        const progress = ((currentQIndex) / 20) * 100; // current progress

        const optionsHtml = q.options.map((opt, idx) => {
          let extraClass = '';
          if (userAnswers[currentQIndex] !== null) {
            // already answered
            if (idx === q.correctIndex) extraClass = 'correct-highlight';
            else if (idx === userAnswers[currentQIndex] && userAnswers[currentQIndex] !== q.correctIndex) extraClass = 'wrong-highlight';
          }
          return `<button class="option-btn ${extraClass}" data-opt-index="${idx}" ${lockSelection ? 'disabled' : ''}>${opt}</button>`;
        }).join('');

        // Disable next button if question not answered OR if we are on last and answered? We'll control.
        const disableNext = (userAnswers[currentQIndex] === null); // cannot go next without answer

        const quizHtml = `
          <div class="quiz-container glass-panel">
            <div class="quiz-header">
              <span style="font-size:1.1rem; background:#13263f; padding:0.3rem 1rem; border-radius:2rem;">${selectedTopic} ¬∑ Q${currentQIndex+1}/20</span>
              <span class="score-badge">‚úÖ ${score} / 20</span>
            </div>
            <div class="progress-bar"><div class="progress-fill" style="width:${progress}%;"></div></div>
            <div class="question-text">${q.question}</div>
            <div class="options-grid" id="quizOptions">${optionsHtml}</div>
            <div class="action-row">
              <button class="secondary-btn" id="backToTopicsBtn">‚¨Ö Topics</button>
              <button class="primary-btn" id="restartQuizBtn">‚ü≥ Restart</button>
              <button class="primary-btn" id="nextQuestionBtn" ${disableNext ? 'disabled' : ''}>‚û° Next</button>
            </div>
          </div>
        `;
        mainEl.innerHTML = quizHtml;

        document.getElementById('backToTopicsBtn').addEventListener('click', resetToHome);
        document.getElementById('restartQuizBtn').addEventListener('click', () => startQuizForTopic(selectedTopic));
        const nextBtn = document.getElementById('nextQuestionBtn');
        if (nextBtn) {
          nextBtn.addEventListener('click', () => {
            if (currentQIndex === 19) {
              // last question -> results
              renderResultsScreen();
            } else {
              currentQIndex++;
              lockSelection = false;  // new question unlocked
              renderQuizScreen();
            }
          });
        }

        document.querySelectorAll('.option-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            if (lockSelection) return;
            const selectedIdx = parseInt(e.currentTarget.dataset.optIndex);
            handleAnswer(selectedIdx);
          });
        });
      }

      function handleAnswer(selectedIdx) {
        const q = quizQuestions[currentQIndex];
        const isCorrect = (selectedIdx === q.correctIndex);
        // store answer
        userAnswers[currentQIndex] = selectedIdx;
        if (isCorrect) score++;
        lockSelection = true;

        // re-render current question with highlights and enable next button
        renderQuizScreen(); 
      }

      function renderResultsScreen() {
        currentScreen = 'results';
        const wrong = 20 - score;
        const percent = Math.round((score/20)*100);
        let level = 'Beginner';
        if (percent >= 70 && percent < 90) level = 'Intermediate';
        else if (percent >= 90) level = 'Expert';

        const resultsHtml = `
          <div class="quiz-container glass-panel results-panel">
            <h2 style="font-size:2.2rem;">üìä Your AWS ${selectedTopic} Results</h2>
            <div class="result-stats">
              <div class="stat-card"><span class="stat-number">20</span><br>Total Q</div>
              <div class="stat-card"><span class="stat-number" style="color:#6ce08a;">${score}</span><br>Correct</div>
              <div class="stat-card"><span class="stat-number" style="color:#ff8a92;">${wrong}</span><br>Wrong</div>
              <div class="stat-card"><span class="stat-number">${percent}%</span><br>Score</div>
            </div>
            <div class="message-expert">üèÜ ${level} ¬∑ ${percent}%</div>
            <div class="action-row" style="justify-content:center;">
              <button class="primary-btn" id="againSameTopic">‚ü≥ Practice ${selectedTopic} again</button>
              <button class="secondary-btn" id="backHomeResults">üìã All topics</button>
            </div>
          </div>
        `;
        mainEl.innerHTML = resultsHtml;
        document.getElementById('againSameTopic')?.addEventListener('click', () => startQuizForTopic(selectedTopic));
        document.getElementById('backHomeResults')?.addEventListener('click', resetToHome);
      }

      // init
      renderSidebar();
      renderHomeScreen();
    })();
  </script>
</body>
</html>